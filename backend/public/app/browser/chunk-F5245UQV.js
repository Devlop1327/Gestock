import{a as M,b as N}from"./chunk-EEGX32CY.js";import{a as k}from"./chunk-RA2M532G.js";import{D as x,G as s,I as o,J as t,K as f,L as S,M as b,N as m,O as i,P as C,Q as c,U as P,V as I,ba as h,ca as E,da as _,ja as y,la as D,q as u,r as v,w as r,y as p,z as g}from"./chunk-G2FCS2CP.js";import"./chunk-2NFLSA4Y.js";function j(d,n){d&1&&(o(0,"div",5),f(1,"div",6),o(2,"p",7),i(3,"Cargando producto..."),t()())}function w(d,n){if(d&1){let e=S();o(0,"div",8)(1,"p")(2,"strong"),i(3,"C\xF3digo:"),t(),i(4),t(),o(5,"p")(6,"strong"),i(7,"Nombre:"),t(),i(8),t(),o(9,"p")(10,"strong"),i(11,"Descripci\xF3n:"),t(),i(12),t(),o(13,"p")(14,"strong"),i(15,"Precio:"),t(),i(16),P(17,"currency"),t(),o(18,"p")(19,"strong"),i(20,"Stock:"),t(),i(21),t(),o(22,"p")(23,"strong"),i(24,"Stock M\xEDnimo:"),t(),i(25),t(),o(26,"p")(27,"strong"),i(28,"Categor\xEDa:"),t(),i(29),t(),o(30,"p")(31,"strong"),i(32,"Proveedor:"),t(),i(33),t(),o(34,"button",9),b("click",function(){u(e);let l=m();return v(l.goBack())}),i(35,"Volver"),t()()}if(d&2){let e=m();r(4),c(" ",e.producto.codigo,""),r(4),c(" ",e.producto.nombre,""),r(4),c(" ",e.producto.descripcion,""),r(4),c(" ",I(17,8,e.producto.precio),""),r(5),c(" ",e.producto.stock,""),r(4),c(" ",e.producto.stock_minimo,""),r(4),c(" ",e.getCategoriaNombre(e.producto.categoria_id),""),r(4),c(" ",e.getProveedorNombre(e.producto.proveedor_id),"")}}function T(d,n){if(d&1&&(o(0,"div",8)(1,"p",10),i(2),t()()),d&2){let e=m();r(2),C(e.errorMsg)}}var R=class d{constructor(n,e,a,l,V){this.route=n;this.productoService=e;this.categoriaService=a;this.proveedorService=l;this.router=V}producto;categorias=[];proveedores=[];loading=!0;errorMsg=null;ngOnInit(){this.categoriaService.getCategorias().subscribe({next:e=>this.categorias=e,error:()=>this.categorias=[]}),this.proveedorService.getProveedores().subscribe({next:e=>this.proveedores=e,error:()=>this.proveedores=[]});let n=this.route.snapshot.paramMap.get("id");n?this.productoService.getProducto(+n).subscribe({next:e=>{this.producto=e,this.loading=!1,this.errorMsg=null},error:e=>{this.producto=void 0,this.loading=!1,this.errorMsg=e.status===404?"Producto no encontrado.":"Error al cargar el producto."}}):(this.loading=!1,this.errorMsg="ID de producto inv\xE1lido.")}goBack(){this.router.navigate(["/productos"])}getCategoriaNombre(n){let e=this.categorias.find(a=>a.id===n);return e?e.nombre:"-"}getProveedorNombre(n){let e=this.proveedores.find(a=>a.id===n);return e?e.nombre:"-"}static \u0275fac=function(e){return new(e||d)(p(y),p(M),p(k),p(N),p(D))};static \u0275cmp=g({type:d,selectors:[["app-producto-detail"]],decls:8,vars:3,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-header","bg-primary","text-white"],["class","card-body text-center",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"card-body"],[1,"btn","btn-secondary",3,"click"],[1,"text-danger"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),i(4,"Detalle del Producto"),t()(),x(5,j,4,0,"div",3)(6,w,36,10,"div",4)(7,T,3,1,"div",4),t()()),e&2&&(r(5),s("ngIf",a.loading),r(),s("ngIf",!a.loading&&a.producto),r(),s("ngIf",!a.loading&&a.errorMsg))},dependencies:[_,h,E],encapsulation:2})};export{R as ProductoDetailComponent};
