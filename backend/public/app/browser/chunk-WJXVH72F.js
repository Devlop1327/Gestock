import{a as y}from"./chunk-RA2M532G.js";import{D as _,G as c,I as t,J as i,K as s,L as x,M as d,N as g,O as r,P as v,aa as h,ba as E,da as S,la as I,q as u,r as b,w as o,y as C,z as f}from"./chunk-G2FCS2CP.js";import"./chunk-2NFLSA4Y.js";function L(a,e){a&1&&(t(0,"div",10)(1,"div",11)(2,"span",12),r(3,"Cargando..."),i()(),t(4,"p",13),r(5,"Cargando categor\xEDas..."),i()())}function w(a,e){a&1&&(t(0,"tr")(1,"td",20)(2,"p",21),r(3,"No hay categor\xEDas registradas"),i()()())}function k(a,e){if(a&1){let n=x();t(0,"tr")(1,"td")(2,"strong"),r(3),i()(),t(4,"td"),r(5),i(),t(6,"td",17)(7,"button",22),d("click",function(){let m=u(n).$implicit,p=g(2);return b(p.editarCategoria(m.id))}),s(8,"i",23),i(),t(9,"button",24),d("click",function(){let m=u(n).$implicit,p=g(2);return b(p.eliminarCategoria(m.id))}),s(10,"i",25),i()()()}if(a&2){let n=e.$implicit;o(3),v(n.nombre),o(2),v(n.descripcion)}}function M(a,e){if(a&1&&(t(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr")(4,"th"),r(5,"Nombre"),i(),t(6,"th"),r(7,"Descripci\xF3n"),i(),t(8,"th",17),r(9,"Acciones"),i()()(),t(10,"tbody"),_(11,w,4,0,"tr",18)(12,k,11,2,"tr",19),i()()()),a&2){let n=g();o(11),c("ngIf",n.categorias.length===0),o(),c("ngForOf",n.categorias)}}var O=class a{constructor(e,n){this.categoriaService=e;this.router=n}categorias=[];loading=!0;eliminandoId=null;ngOnInit(){this.loadCategorias()}loadCategorias(){this.categoriaService.getCategorias().subscribe({next:e=>{this.categorias=e.data?e.data:e,this.loading=!1},error:()=>{this.loading=!1}})}nuevaCategoria(){this.router.navigate(["/categorias/nuevo"])}editarCategoria(e){this.router.navigate(["/categorias/editar",e])}eliminarCategoria(e){confirm("\xBFEst\xE1s seguro de que deseas eliminar esta categor\xEDa?")&&(this.eliminandoId=e,this.categoriaService.deleteCategoria(e).subscribe({next:()=>{this.loadCategorias(),this.eliminandoId=null},error:()=>{alert("Error al eliminar la categor\xEDa."),this.eliminandoId=null}}))}static \u0275fac=function(n){return new(n||a)(C(y),C(I))};static \u0275cmp=f({type:a,selectors:[["app-categoria-list"]],decls:12,vars:2,consts:[[1,"container"],[1,"card"],[1,"card-header","bg-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"card-body"],["class","text-center p-5",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[1,"text-end"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3",1,"text-center","p-4"],[1,"text-muted","mb-0"],["title","Editar",1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(n,l){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),r(5,"Lista de Categor\xEDas"),i(),t(6,"button",5),d("click",function(){return l.nuevaCategoria()}),s(7,"i",6),r(8," Nueva Categor\xEDa "),i()()(),t(9,"div",7),_(10,L,6,0,"div",8)(11,M,13,2,"div",9),i()()()),n&2&&(o(10),c("ngIf",l.loading),o(),c("ngIf",!l.loading))},dependencies:[S,h,E],styles:[".card[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;border:none;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);padding:1rem}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#495057}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem}"]})};export{O as CategoriaListComponent};
