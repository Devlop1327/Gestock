<div class="container">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">{{ esEdicion ? 'Editar Categoría' : 'Nueva Categoría' }}</h2>
    </div>
    <div class="card-body">
      <form [formGroup]="categoriaForm" (ngSubmit)="onSubmit()" class="mt-4">
        <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
          {{ error }}
          <button type="button" class="btn-close" (click)="error = ''" aria-label="Close"></button>
        </div>
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre *</label>
          <input type="text" class="form-control" id="nombre" formControlName="nombre"
                 [class.is-invalid]="categoriaForm.get('nombre')?.invalid && categoriaForm.get('nombre')?.touched">
          <div class="invalid-feedback" *ngIf="categoriaForm.get('nombre')?.errors?.['required']">
            El nombre es requerido
          </div>
          <div class="invalid-feedback" *ngIf="categoriaForm.get('nombre')?.errors?.['maxlength']">
            El nombre no puede exceder los 100 caracteres
          </div>
        </div>
        <div class="mb-3">
          <label for="descripcion" class="form-label">Descripción</label>
          <textarea class="form-control" id="descripcion" formControlName="descripcion" rows="3"
                    [class.is-invalid]="categoriaForm.get('descripcion')?.invalid && categoriaForm.get('descripcion')?.touched"></textarea>
          <div class="invalid-feedback" *ngIf="categoriaForm.get('descripcion')?.errors?.['maxlength']">
            La descripción no puede exceder los 500 caracteres
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Activo</label>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="activo" formControlName="activo">
            <label class="form-check-label" for="activo">La categoría está activa</label>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-4 align-items-end">
          <button type="button" class="btn btn-info" (click)="goToCategorias()">Mis Categorías</button>
          <div class="ms-auto">
            <button type="button" class="btn btn-secondary me-2" (click)="goBack()">Cancelar</button>
            <button type="submit" class="btn btn-primary" [disabled]="categoriaForm.invalid || submitting">
              <span *ngIf="submitting" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
              {{ submitting ? 'Guardando...' : 'Guardar Categoría' }}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
